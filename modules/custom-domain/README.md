<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# Create AFD custom-domain

This module creates Azure Front Door custom domain resource

<!-- markdownlint-disable MD033 -->
## Requirements

The following requirements are needed by this module:

- <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) (~> 1.10)

- <a name="requirement_azapi"></a> [azapi](#requirement\_azapi) (~> 2.4)

## Resources

The following resources are used by this module:

- [azapi_resource.custom_domain](https://registry.terraform.io/providers/Azure/azapi/latest/docs/resources/resource) (resource)

<!-- markdownlint-disable MD013 -->
## Required Inputs

The following input variables are required:

### <a name="input_host_name"></a> [host\_name](#input\_host\_name)

Description: The fully qualified domain name (FQDN) of the custom domain.

This must be a valid domain name that you own. You will need to create DNS records to validate ownership and route traffic.

Examples:
- `www.example.com`
- `api.example.com`
- `cdn.example.com`

Example Input:

```hcl
host_name = "www.example.com"
```

Type: `string`

### <a name="input_name"></a> [name](#input\_name)

Description: The name of the custom domain resource.

This name uniquely identifies the custom domain within the CDN profile. It is typically derived from the hostname but with special characters replaced.

Example Input:

```hcl
name = "www-example-com"
```

Type: `string`

### <a name="input_profile_id"></a> [profile\_id](#input\_profile\_id)

Description: The full Azure Resource ID of the CDN profile where this custom domain will be created.

This should be in the format:
`/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Cdn/profiles/{profileName}`

Example Input:

```hcl
profile_id = "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/my-rg/providers/Microsoft.Cdn/profiles/my-profile"
```

Type: `string`

### <a name="input_profile_name"></a> [profile\_name](#input\_profile\_name)

Description: The name of the parent CDN profile.

This is used to construct resource references and must match the name in the `profile_id`.

Example Input:

```hcl
profile_name = "my-cdn-profile"
```

Type: `string`

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_azure_dns_zone_id"></a> [azure\_dns\_zone\_id](#input\_azure\_dns\_zone\_id)

Description: The full Azure Resource ID of an Azure DNS zone that contains this domain.

When specified, Azure Front Door can automatically validate domain ownership if you manage DNS through Azure DNS.

Example Input:

```hcl
azure_dns_zone_id = "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/my-rg/providers/Microsoft.Network/dnsZones/example.com"
```

Type: `string`

Default: `null`

### <a name="input_extended_properties"></a> [extended\_properties](#input\_extended\_properties)

Description: Key-value pairs representing migration or extended properties for this custom domain.

These properties are typically used during domain migrations or for storing custom metadata.

Example Input:

```hcl
extended_properties = {
  migrationSource = "legacy-cdn"
  environment     = "production"
}
```

Type: `map(string)`

Default: `null`

### <a name="input_mtls_settings"></a> [mtls\_settings](#input\_mtls\_settings)

Description: Mutual TLS (mTLS) configuration for client certificate authentication on this custom domain.

mTLS requires clients to present valid certificates, providing an additional layer of security beyond standard TLS.

- `scenario`                     = (Required) The mTLS scenario. Possible values:
  - `ClientCertificateRequiredAndOriginValidates` - Client cert required, origin validates it
  - `ClientCertificateRequiredAndValidated` - Client cert required, Azure Front Door validates it
  - `ClientCertificateValidatedIfPresented` - Client cert optional but validated if provided
  - `CompleteMtlsPassthroughToOrigin` - Pass client cert to origin without validation
- `allowed_fqdns`                = (Optional) List of allowed client certificate FQDNs.
- `certificate_revocation_check` = (Optional) Whether to check certificate revocation. Possible values are `Enabled` or `Disabled`.
- `secret_ids`                   = (Optional) List of secret IDs containing CA certificates for validation.

Example Input:

```hcl
mtls_settings = {
  scenario                     = "ClientCertificateRequiredAndValidated"
  certificate_revocation_check = "Enabled"
  secret_ids = [
    "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/my-rg/providers/Microsoft.Cdn/profiles/my-profile/secrets/ca-cert"
  ]
}
```

Type:

```hcl
object({
    scenario                     = string
    allowed_fqdns                = optional(list(string))
    certificate_revocation_check = optional(string)
    secret_ids                   = optional(list(string))
  })
```

Default: `null`

### <a name="input_pre_validated_custom_domain_resource_id"></a> [pre\_validated\_custom\_domain\_resource\_id](#input\_pre\_validated\_custom\_domain\_resource\_id)

Description: The full Azure Resource ID of an Azure resource where custom domain ownership was previously validated.

This allows you to skip domain validation when the domain has already been validated through another Azure service (e.g., App Service custom domain).

Example Input:

```hcl
pre_validated_custom_domain_resource_id = "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/my-rg/providers/Microsoft.Web/sites/my-app-service/hostNameBindings/www.example.com"
```

Type: `string`

Default: `null`

### <a name="input_tls_settings"></a> [tls\_settings](#input\_tls\_settings)

Description: TLS/SSL certificate configuration for enabling HTTPS on this custom domain.

This configures the certificate, TLS version, and cipher suites for secure connections.

- `certificate_type`      = (Required) The type of certificate to use. Possible values:
  - `AzureFirstPartyManagedCertificate` - Microsoft-managed certificate (for select Azure services)
  - `CustomerCertificate` - Bring your own certificate from Azure Key Vault
  - `ManagedCertificate` - Azure Front Door managed certificate (free)
- `cipher_suite_set_type` = (Optional) The cipher suite set to use. Possible values:
  - `Customized` - Use custom cipher suites defined in `customized_cipher_suite_set`
  - `TLS10_2019` - TLS 1.0+ cipher suites (legacy, not recommended)
  - `TLS12_2022` - TLS 1.2+ cipher suites (2022 set)
  - `TLS12_2023` - TLS 1.2+ cipher suites (2023 set, recommended)
- `customized_cipher_suite_set` = (Optional) Custom cipher suite configuration when `cipher_suite_set_type` is `Customized`
  - `cipher_suite_set_for_tls12` = (Optional) List of cipher suites for TLS 1.2 connections
  - `cipher_suite_set_for_tls13` = (Optional) List of cipher suites for TLS 1.3 connections
- `minimum_tls_version` = (Optional) The minimum TLS version to accept. Possible values:
  - `TLS10` - TLS 1.0 or later (not recommended)
  - `TLS12` - TLS 1.2 or later (recommended)
  - `TLS13` - TLS 1.3 or later (most secure)
- `secret_id`           = (Optional) The resource ID of the secret containing the certificate. Required when `certificate_type` is `CustomerCertificate`.

Example Input (Managed Certificate):

```hcl
tls_settings = {
  certificate_type      = "ManagedCertificate"
  minimum_tls_version   = "TLS12"
  cipher_suite_set_type = "TLS12_2023"
}
```

Example Input (Customer Certificate):

```hcl
tls_settings = {
  certificate_type      = "CustomerCertificate"
  minimum_tls_version   = "TLS12"
  cipher_suite_set_type = "TLS12_2023"
  secret_id             = "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/my-rg/providers/Microsoft.Cdn/profiles/my-profile/secrets/my-cert"
}
```

Type:

```hcl
object({
    certificate_type      = string
    cipher_suite_set_type = optional(string)
    customized_cipher_suite_set = optional(object({
      cipher_suite_set_for_tls12 = optional(list(string))
      cipher_suite_set_for_tls13 = optional(list(string))
    }))
    minimum_tls_version = optional(string)
    secret_id           = optional(string)
  })
```

Default: `null`

## Outputs

The following outputs are exported:

### <a name="output_deployment_status"></a> [deployment\_status](#output\_deployment\_status)

Description: The deployment status of the custom domain.

### <a name="output_dns_validation"></a> [dns\_validation](#output\_dns\_validation)

Description: DNS validation information for the custom domain.

### <a name="output_domain_validation_state"></a> [domain\_validation\_state](#output\_domain\_validation\_state)

Description: The domain validation state of the custom domain.

### <a name="output_host_name"></a> [host\_name](#output\_host\_name)

Description: The host name of the custom domain.

### <a name="output_id"></a> [id](#output\_id)

Description: The resource ID of the custom domain.

### <a name="output_name"></a> [name](#output\_name)

Description: The name of the custom domain.

### <a name="output_resource_id"></a> [resource\_id](#output\_resource\_id)

Description: The resource ID of the custom domain.

### <a name="output_validation_properties"></a> [validation\_properties](#output\_validation\_properties)

Description: The validation properties for DNS validation.

## Modules

No modules.

<!-- markdownlint-disable-next-line MD041 -->
## Data Collection

The software may collect information about you and your use of the software and send it to Microsoft. Microsoft may use this information to provide services and improve our products and services. You may turn off the telemetry as described in the repository. There are also some features in the software that may enable you and Microsoft to collect data from users of your applications. If you use these features, you must comply with applicable law, including providing appropriate notices to users of your applications together with a copy of Microsoftâ€™s privacy statement. Our privacy statement is located at <https://go.microsoft.com/fwlink/?LinkID=824704>. You can learn more about data collection and use in the help documentation and our privacy statement. Your use of the software operates as your consent to these practices.
<!-- END_TF_DOCS -->